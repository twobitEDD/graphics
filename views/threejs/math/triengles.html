<html>

<head>
  <title>Triangles</title>
  <style>
    body{
      margin: 0 auto;
      overflow: hidden;
    }

    #canvas{
      background: transparent;
    }

    div{
      position: absolute;
      width: 100px;
      height: 30px;
      background-color: rgba(255,255,255, 0.5);
      top: 0px ;
      left: 0px;
    }

  </style>

  <script src="js/randomColor.js"></script>

  <head>

    <body>

      <canvas id="canvas"></canvas>
      <div>
        <input type='range' step='1' min='10' max='300' onchange="update(this.value)"/>
      </div>
      <script>

     var colors = [];
     var colorCant = 30;
     var colorsB = [];
     var colorBCant = 30;
     setColors();

     var delta = 30;

      var canvas  = document.getElementById('canvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      var ctx = canvas.getContext('2d');
      ctx.fillStyle = '#000';
      ctx.strokeStyle = '#FFF';
      ctx.lineWidth = 2;

      function setColors(){
        colors = randomColor({count: colorCant, hue: 'blue'});
        colorsB = randomColor({count: colorBCant, hue: 'purple'});
      }

     
      function update(val){
        delta = parseInt(val);
        setColors();
        start();
      }

      function start(){

        ctx.fillStyle = '#FFF';//randomColor({hue: 'monochrome', luminosity:'light'});
        ctx.strokeStyle = '#FFF';
        ctx.lineWidth = 2;

        var cantx, canty;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        cantx = canvas.width/delta;
        canty = canvas.height/delta;
        var x0,y0;
        var x1,y1;
        var x2=0,y2=0;
        var i,j;
        var colorCont = 0;
        var colorBCont = 0;

        for(j=0; j < canty; j++){
          x2=0;
          for(i=0; i < cantx; i++){

            x0 = x2;
            y0 = j*delta;

            x1 = x0 + delta;
            y1 = y0;

            x2 = x1;
            y2 = y0 + delta;

            var r = Math.random();
            if(r > 0.5){
              ctx.beginPath();
              ctx.moveTo(x0, y0);
              ctx.lineTo(x1, y1);
              ctx.lineTo(x2, y2);
              ctx.fillStyle = colors[colorCont%colorCant];
              ctx.fill();
              colorCont+=1;
            }

            
            if(r < 0.5){
              ctx.beginPath();
              ctx.moveTo(x0, y0);
              ctx.lineTo(x0, y2);
              ctx.lineTo(x1, y2);
              ctx.fillStyle = colors[colorCont%colorCant];
              ctx.fill();
              colorCont+=1;
            }
            r = Math.random();
            if(r > 0.5){
              ctx.beginPath();
              ctx.moveTo(x0, y0);
              ctx.lineTo(x0, y2);
              ctx.lineTo(x1, y1);
              ctx.fillStyle = colorsB[colorBCont%colorBCant];
              ctx.fill();
              colorBCont+=1;
            }
          }
        }

        var x=0,y=0;
        for(i=0; i < cantx; i++){

          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, canvas.height);
          ctx.stroke();
          x+= delta;
          
        }

        for(j=0; j < canty; j++){
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(canvas.width, y);
          ctx.stroke();
          y += delta;
        }

        if (delta > 25){
          ctx.lineWidth = 0.5;
          x=0;
          for(i=0; i < cantx*2; i++){

            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, canvas.height);
            ctx.stroke();
            x+= delta/2;
            
          }
          y=0;
          for(j=0; j < canty*2; j++){
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
            y += delta/2;
          }

        }

        if (false){
          ctx.strokeStyle = '#fff';
                ctx.lineWidth = 5;
                x=0;
                y=0;
                var l = 400;
                var d = 35;

                var lx = canvas.width;
                var ly = canvas.height;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
                for(i=0; i < 8; i++){
                    x += lx;
                    y += d;
                    //d+=2;
                    ctx.lineTo(x, y);
                    l -= d;
                    ly -= d;
                    lx -= d;
                    y += ly;
                    x -= d;
                    //d+=2;
                    ctx.lineTo(x, y);
                    l -= d;
                    ly -= d;
                    lx -= d;
                    x -=lx;
                    y -= d;
                    //d+=2;
                    ctx.lineTo(x, y);
                    l -= d;
                    ly -= d;
                    lx -= d;
                    y -=ly;
                    x+=d;
                    //d+=2;
                    ctx.lineTo(x, y);
                    l -= d;
                    ly -= d;
                    lx -= d;
                }
                ctx.stroke();
        }
        
      }

      start();

</script>
</body>
</html>